param(
  [string]$RepoRoot = "D:\CHECHA_CORE",
  [string]$Branch   = "reports",
  [switch]$OpenWeb
)

function Die($msg){ Write-Host "[ERR] $msg" -ForegroundColor Red; exit 1 }

# 0) –ü–µ—Ä–µ–≤—ñ—Ä–∏–º–æ, —â–æ repo —ñ—Å–Ω—É—î
if (!(Test-Path -LiteralPath $RepoRoot)) { Die "RepoRoot –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ: $RepoRoot" }
Set-Location $RepoRoot

# 1) –ü–µ—Ä–µ–≤—ñ—Ä–∏–º–æ, —â–æ —Ç—É—Ç git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git rev-parse --is-inside-work-tree 2>$null | Out-Null
if ($LASTEXITCODE -ne 0) { Die "–¢–µ–∫–∞ –Ω–µ —î git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—î–º: $RepoRoot" }

# 2) –ü–µ—Ä–µ–º–∫–Ω–µ–º–æ—Å—è/—Å—Ç–≤–æ—Ä–∏–º–æ –≥—ñ–ª–∫—É, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
$cur = git rev-parse --abbrev-ref HEAD
if ($cur -ne $Branch) {
  git show-ref --verify --quiet "refs/heads/$Branch"
  if ($LASTEXITCODE -eq 0) { git checkout $Branch } else { git checkout -b $Branch }
}

# 3) –ì–∞—Ä–∞–Ω—Ç—É—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å C11
New-Item -ItemType Directory -Force -Path ".\C11" | Out-Null

# 4) –ö–æ–Ω—Ç–µ–Ω—Ç README
$readme = @"
# üöÄ –ö–æ—Ä–∞–±–µ–ª—å CHECHA

–¶–µ –≥–æ–ª–æ–≤–Ω–∏–π README –¥–ª—è —Å–µ–∫—Ü—ñ—ó **C11**.  
–í—ñ–Ω –æ–ø–∏—Å—É—î –ö–æ—Ä–∞–±–µ–ª—å —è–∫ —Å–∏—Å—Ç–µ–º—É –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó, –∫–∞—Ä—Ç–∏ —Ç–∞ —Ä–µ–∂–∏–º–∏.

---

## üß≠ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è
- –û—Ä—ñ—î–Ω—Ç–∏—Ä–∏: CHECHA_CORE (D:\CHECHA_CORE), GitHub (dao-gogs-core / -docs-)
- –õ–æ–≥: REPORTS/, CHECKLIST, CHECKSUMS
- –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É: C11 (Knowledge Integration Hub)

---

## üó∫ –ö–∞—Ä—Ç–∏
- **BTD Integration Map (Mermaid)** ‚Äî –≥–æ–ª–æ–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –º–æ–¥—É–ª—ñ–≤.
- **C11/BTD 1.0/** ‚Äî –±–∞–∑–æ–≤–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤.
- **SHIELD4_ODESA/** ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∞ –∑–æ–Ω–∞ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è.
- –í—Å—ñ –∫–∞—Ä—Ç–∏ ‚Äî —Ç—ñ–ª—å–∫–∏ Markdown, –±–µ–∑ ZIP-–∞—Ä—Ö—ñ–≤—ñ–≤.

---

## ‚öôÔ∏è –†–µ–∂–∏–º–∏
- **–†–æ–±–æ—á–∏–π** ‚Äî —â–æ–¥–µ–Ω–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è, –∫–æ–º—ñ—Ç–∏, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞.
- **–°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∏–π** ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –ø–ª–∞–Ω—ñ–≤ —ñ –¥–æ—Ä–æ–∂–Ω—ñ—Ö –∫–∞—Ä—Ç.
- **–¢–≤–æ—Ä—á–∏–π** ‚Äî –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è, –º–µ—Ç–∞—Ñ–æ—Ä–∏, —Å–∏–º–≤–æ–ª–∏, –º—ñ—Ñ–æ–ª–æ–≥—ñ—è.

---

## üß© –ú–æ–¥—É–ª—ñ
- **C11** ‚Äî —è–¥—Ä–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑–Ω–∞–Ω—å.
- **BTD** ‚Äî –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ v1.0.
- **SHIELD** ‚Äî –∑–∞—Ö–∏—Å–Ω—ñ —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏ (–©–∏—Ç-1..–©–∏—Ç-4).
- **DAO-GOGS** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–≤—ñ–¥–æ–º–∏—Ö.

---

## üë• –ï–∫—ñ–ø–∞–∂
- **–°–µ—Ä–≥—ñ–π (–°.–ß.)** ‚Äî –∫–∞–ø—ñ—Ç–∞–Ω, –∞—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä, —Å—Ç—Ä–∞—Ç–µ–≥.
- **–®–Ü-–Ω–∞–≤—ñ–≥–∞—Ç–æ—Ä** ‚Äî –∫–∞—Ä—Ç–∞, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è.

---

## üìú –ú–∞–Ω—ñ—Ñ–µ—Å—Ç
–ú–µ—Ç–∞ –ö–æ—Ä–∞–±–ª—è CHECHA ‚Äî —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑–Ω–∞–Ω–Ω—è, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –π —Å–∏–º–≤–æ–ª–∏,  
–ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—á–∏ —Ö–∞–æ—Å —É –≤–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω—É —Å–∏—Å—Ç–µ–º—É.  

- –ú–∏ —Ä—É—Ö–∞—î–º–æ—Å—è –∫—Ä—ñ–∑—å –æ–∫–µ–∞–Ω —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.  
- –ù–∞—à—ñ –∫–∞—Ä—Ç–∏ ‚Äî –∑–Ω–∞–Ω–Ω—è –π –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞.  
- –ù–∞—à –∫—É—Ä—Å ‚Äî —Å–≤—ñ–¥–æ–º—ñ—Å—Ç—å —ñ —Ä–æ–∑–≤–∏—Ç–æ–∫.  

**–°.–ß.**
"@

# 5) –ó–∞–ø–∏—Å README
$readme | Set-Content -LiteralPath ".\C11\README.md" -Encoding UTF8
Write-Host "[OK] –û–Ω–æ–≤–ª–µ–Ω–æ C11\README.md" -ForegroundColor Green

# 6) –î–æ–¥–∞—Ç–∏ –¥–æ git —ñ –∫–æ–º—ñ—Ç–Ω—É—Ç–∏, —è–∫—â–æ —î –∑–º—ñ–Ω–∏
git add -f .\C11\README.md
git diff --cached --quiet
if ($LASTEXITCODE -ne 0) {
  git commit -m "docs(C11): add/update CHECHA ship README"
  Write-Host "[OK] Commit —Å—Ç–≤–æ—Ä–µ–Ω–æ." -ForegroundColor Green
} else {
  Write-Host "[INFO] –ó–º—ñ–Ω –¥–ª—è –∫–æ–º—ñ—Ç—É –Ω–µ–º–∞—î." -ForegroundColor Yellow
}

# 7) –ü—É—à
git push -u origin $Branch
if ($LASTEXITCODE -ne 0) { Die "Push –Ω–µ –≤–¥–∞–≤—Å—è. –ü–µ—Ä–µ–≤—ñ—Ä origin/–¥–æ—Å—Ç—É–ø." }
Write-Host "[OK] Push ‚Üí origin/$Branch" -ForegroundColor Green

# 8) –°—Ç–∞—Ç—É—Å
git status

# 9) –í—ñ–¥–∫—Ä–∏—Ç–∏ GitHub
if ($OpenWeb) {
  try { gh browse } catch { Write-Host "[WARN] gh –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –∞–±–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π." -ForegroundColor Yellow }
}
